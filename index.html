<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>4x4 Grid Permutation Generator</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 20px;
  }
  .grid {
    display: grid;
    grid-template-columns: repeat(4, 50px);
    grid-gap: 5px;
    margin-bottom: 20px;
  }
  .cell {
    width: 50px;
    height: 50px;
    font-size: 20px;
    text-align: center;
    vertical-align: middle;
    border: 2px solid #333;
  }
  #subsetSize {
    margin-bottom: 10px;
  }
  button {
    padding: 10px 20px;
    font-size: 16px;
  }
  #results {
    margin-top: 20px;
  }
  #permutationList {
    max-height: 300px;
    overflow-y: auto;
    border: 1px solid #ccc;
    padding: 10px;
  }
  .permutation {
    margin: 2px 0;
  }
</style>
</head>
<body>

<h2>4x4 Grid Number Input</h2>
<p>Fill all cells with digits (0-9). Then, select subset size: 4, 6, 12, or 16. Click "Generate Permutations" to see permutations of that subset.</p>

<div class="grid" id="gridContainer"></div>

<div id="subsetSize">
  <label for="subsetSelect">Select subset size: </label>
  <select id="subsetSelect">
    <option value="4">4</option>
    <option value="6">6</option>
    <option value="12">12</option>
    <option value="16">16</option>
  </select>
</div>

<button onclick="generateSubsetPermutations()">Generate Permutations</button>

<div id="results">
  <h3>Permutations:</h3>
  <div id="permutationList"></div>
</div>

<script>
// Generate the 4x4 grid with input boxes
const gridContainer = document.getElementById('gridContainer');
const cells = [];

for (let i = 0; i < 16; i++) {
  const input = document.createElement('input');
  input.type = 'text';
  input.maxLength = 1;
  input.className = 'cell';
  input.placeholder = '';
  gridContainer.appendChild(input);
  cells.push(input);
}

// Function to generate permutations of an array
function permute(arr) {
  const results = [];
  if (arr.length === 1) {
    return [arr];
  }
  for (let i = 0; i < arr.length; i++) {
    const current = arr.slice();
    const first = current.splice(i, 1)[0];
    const remainingPerms = permute(current);
    for (const perm of remainingPerms) {
      results.push([first, ...perm]);
    }
  }
  return results;
}

// Generate permutations of selected subset size
function generateSubsetPermutations() {
  const subsetSize = parseInt(document.getElementById('subsetSelect').value);
  const values = [];

  // Get all valid filled cells
  for (let i = 0; i < cells.length; i++) {
    const val = cells[i].value.trim();
    if (!/^[0-9]$/.test(val)) {
      alert('All cells must contain digits 0-9.');
      return;
    }
    values.push(val);
  }

  // Check if subset size is valid
  if (subsetSize > values.length) {
    alert(`Subset size cannot be larger than total cells (${values.length}).`);
    return;
  }

  // Generate all combinations of size subsetSize
  const combinations = getCombinations(values, subsetSize);
  const allPermutations = [];

  // For each combination, generate permutations
  combinations.forEach(combo => {
    const perms = permute(combo);
    allPermutations.push(...perms);
  });

  // Display permutations
  displayResults(allPermutations);
}

// Function to get all combinations of array elements of length k
function getCombinations(arr, k) {
  const results = [];
  function helper(start, combo) {
    if (combo.length === k) {
      results.push(combo.slice());
      return;
    }
    for (let i = start; i < arr.length; i++) {
      combo.push(arr[i]);
      helper(i + 1, combo);
      combo.pop();
    }
  }
  helper(0, []);
  return results;
}

// Function to display permutations
function displayResults(permutations) {
  const container = document.getElementById('permutationList');
  container.innerHTML = '';

  if (permutations.length === 0) {
    container.textContent = 'No permutations found.';
    return;
  }

  // Limit output for large number of permutations
  const maxDisplay = 256; 
  const displayPerms = permutations.slice(0, maxDisplay);
  displayPerms.forEach(perm => {
    const div = document.createElement('div');
    div.className = 'permutation';
    div.textContent = perm.join(', ');
    container.appendChild(div);
  });

  if (permutations.length > maxDisplay) {
    const note = document.createElement('div');
    note.textContent = `Showing first ${maxDisplay} of ${permutations.length} permutations.`;
    container.appendChild(note);
  }
}
</script>

</body>
</html>
