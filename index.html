<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Rex 4D Box Chart with Input</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background-color: #f0f4f8;
    margin: 20px;
  }
  h1 {
    text-align: center;
  }
  .grid {
    display: grid;
    grid-template-columns: repeat(4, 60px);
    gap: 10px;
    justify-content: center;
    margin-top: 20px;
  }
  .box-input {
    width: 60px;
    height: 60px;
    font-size: 1.5em;
    text-align: center;
    border: 2px solid #007bff;
    border-radius: 4px;
  }
  .buttons {
    display: flex;
    justify-content: center;
    gap: 10px;
    margin-top: 20px;
  }
  button {
    padding: 10px 20px;
    font-size: 1em;
    border: none;
    border-radius: 4px;
    cursor: pointer;
  }
  button:hover {
    background-color: #007bff;
    color: white;
  }
  .search-container {
    text-align: center;
    margin-top: 20px;
  }
  input[type="text"] {
    padding: 8px;
    font-size: 1em;
    width: 300px;
    border: 1px solid #ccc;
    border-radius: 4px;
  }
  .combinations {
    margin-top: 20px;
    max-height: 300px;
    overflow-y: auto;
    padding: 0 20px;
  }
  .combination {
    padding: 5px 0;
  }
</style>
</head>
<body>

<h1>Rex 4D Box Chart with Input and Search</h1>

<div class="grid" id="grid">
  <!-- 16 input boxes will be generated here -->
</div>

<div class="buttons">
  <button id="generateBtn">Generate</button>
  <button id="resetBtn">Reset</button>
</div>

<div class="search-container">
  <input type="text" id="searchInput" placeholder="Search combinations containing digits..."/>
</div>

<div class="combinations" id="combinationsList">
  <!-- List of combinations will appear here -->
</div>

<script>
  const gridContainer = document.getElementById('grid');
  const generateBtn = document.getElementById('generateBtn');
  const resetBtn = document.getElementById('resetBtn');
  const searchInput = document.getElementById('searchInput');
  const combinationsList = document.getElementById('combinationsList');

  let currentCombinations = [];

  function initGrid() {
    gridContainer.innerHTML = '';
    for (let i = 0; i < 16; i++) {
      const input = document.createElement('input');
      input.type = 'text';
      input.maxLength = 1; // limit to 1 character
      input.className = 'box-input';
      input.placeholder = '0-9';
      // Restrict input to digits only
      input.addEventListener('input', () => {
        input.value = input.value.replace(/[^0-9]/g, '');
      });
      gridContainer.appendChild(input);
    }
  }

  function generateCombinations() {
    const inputs = document.querySelectorAll('.grid .box-input');
    const digits = Array.from(inputs).map(input => input.value.trim());
    if (digits.some(d => d === '')) {
      alert('Please fill all boxes with digits 0-9.');
      return;
    }
    const combos = [];
    for (let d1 of digits) {
      for (let d2 of digits) {
        for (let d3 of digits) {
          for (let d4 of digits) {
            combos.push(d1 + d2 + d3 + d4);
          }
        }
      }
    }
    currentCombinations = combos;
    displayCombinations(combos);
  }

  function displayCombinations(combos) {
    combinationsList.innerHTML = '';
    combos.forEach(c => {
      const div = document.createElement('div');
      div.className = 'combination';
      div.textContent = c;
      combinationsList.appendChild(div);
    });
  }

  function resetGrid() {
    initGrid();
    combinationsList.innerHTML = '';
    currentCombinations = [];
  }

  document.getElementById('generateBtn').addEventListener('click', () => {
    generateCombinations();
  });

  document.getElementById('resetBtn').addEventListener('click', () => {
    resetGrid();
  });

  searchInput.addEventListener('input', () => {
    const query = searchInput.value.trim();
    if (query === '') {
      displayCombinations(currentCombinations);
    } else {
      const filtered = currentCombinations.filter(c => c.includes(query));
      displayCombinations(filtered);
    }
  });

  // Initialize grid on page load
  initGrid();
</script>
</body>
</html>
