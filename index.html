<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>4x4 Grid Permutation Generator</title>
<style>
  body {
    background: #f0f0f0;
    font-family: Arial, sans-serif;
    padding: 20px;
  }
  h1 {
    text-align: center;
  }
  table {
    margin: 20px auto;
    border-collapse: collapse;
  }
  td {
    border: 1px solid #999;
    padding: 8px;
  }
  input[type="number"] {
    width: 50px;
    font-size: 16px;
    text-align: center;
  }
  #buttons {
    text-align: center;
    margin-bottom: 20px;
  }
  button {
    background: #333;
    color: #fff;
    border: none;
    padding: 10px 16px;
    margin: 0 8px;
    cursor: pointer;
    border-radius: 4px;
  }
  button:hover {
    background: #555;
  }
  #results {
    max-width: 900px;
    margin: 0 auto;
    background: #fff;
    border: 1px solid #ccc;
    padding: 10px;
    white-space: pre-wrap;
    font-family: monospace;
    overflow-x: auto;
    height: 500px;
    overflow-y: auto;
  }
  h2 {
    margin-top: 30px;
    text-align: center;
  }
</style>
</head>
<body>

<h1>Fill the 4x4 Grid and Generate Permutations</h1>

<!-- 4x4 Input Grid -->
<table id="gridTable">
  <tbody>
    <!-- JS will populate -->
  </tbody>
</table>

<div id="buttons">
  <button id="generateBtn">Generate Combinations</button>
</div>

<h2>Permutation Results</h2>
<div id="results"></div>

<script>
  // Generate 4x4 input grid
  const tbody = document.querySelector('#gridTable tbody');
  for (let r=0; r<4; r++) {
    const tr = document.createElement('tr');
    for (let c=0; c<4; c++) {
      const td = document.createElement('td');
      const input = document.createElement('input');
      input.type = 'number';
      input.min = 0;
      input.max = 9;
      input.value = '';
      input.id = `cell-${r}-${c}`;
      td.appendChild(input);
      tr.appendChild(td);
    }
    tbody.appendChild(tr);
  }

  document.getElementById('generateBtn').addEventListener('click', () => {
    // Collect digits
    const digits = [];
    for (let r=0; r<4; r++) {
      for (let c=0; c<4; c++) {
        const val = document.getElementById(`cell-${r}-${c}`).value.trim();
        if (val === '' || isNaN(val) || val < 0 || val > 9) {
          alert('Please fill all cells with digits 0-9.');
          return;
        }
        digits.push(val);
      }
    }

    // Generate all unique permutations
    const uniquePerms = new Set();

    // Generate permutations (with duplicates removed)
    // For small input (16 digits), permutations are large, but we only generate unique permutations
    // Use a recursive approach with counting duplicates for efficiency.

    // Count occurrences
    const counts = {};
    digits.forEach(d => { counts[d] = (counts[d] || 0) + 1; });

    const permuteUnique = (path, length) => {
      if (path.length === length) {
        uniquePerms.add(path.join(''));
        return;
      }
      for (let key in counts) {
        if (counts[key] > 0) {
          counts[key]--;
          permuteUnique([...path, key], length);
          counts[key]++;
        }
      }
    }

    permuteUnique([], 16);

    // Convert to array for processing
    const permsArray = Array.from(uniquePerms);

    // Categorize permutations based on counts
    // For simplicity, group by the number of unique digits in the permutation.
    // Alternatively, categorize based on the number of permutations matching certain permutation counts.
    // But since duplicates are removed, the total count is less than or equal to 256.

    // For demonstration, we will categorize by number of unique digits in each permutation:
    const categories = {
      '24 permutations (all digits unique)': [],
      '12 permutations (2 repeated digits)': [],
      '6 permutations (3 repeated digits)': [],
      '4 permutations (more repeats)': [],
      '1 permutation (all same digits)': []
    };

    permsArray.forEach(p => {
      const uniqueCount = new Set(p).size;
      if (uniqueCount === 16) {
        categories['24 permutations (all digits unique)'].push(p);
      } else if (uniqueCount === 15 || uniqueCount === 14 || uniqueCount === 13 || uniqueCount === 12) {
        categories['12 permutations (2 repeated digits)'].push(p);
      } else if (uniqueCount === 11 || uniqueCount === 10 || uniqueCount === 9 || uniqueCount === 8) {
        categories['6 permutations (3 repeated digits)'].push(p);
      } else if (uniqueCount === 4) {
        categories['4 permutations (more repeats)'].push(p);
      } else if (uniqueCount === 1) {
        categories['1 permutation (all same digits)'].push(p);
      } else {
        // fallback, just list all
      }
    });

    // For simplicity, just list all permutations
    // Or, to match your description, list all in sequence
    displayPermutations(permsArray, categories);
  });

  function displayPermutations(allPerms, categories) {
    const container = document.getElementById('results');
    let html = '';

    html += `Total unique permutations: ${allPerms.length}\n\n`;

    // Optional: display categorized groups
    for (const [categoryName, perms] of Object.entries(categories)) {
      html += `\n--- ${categoryName} ---\n`;
      perms.forEach((p, index) => {
        html += `${p}\n`;
      });
    }

    // Also display all permutations in sequence
    html += `\nAll permutations:\n`;
    allPerms.forEach((p, index) => {
      html += `${index + 1}. ${p}\n`;
    });

    container.textContent = html;
  }
</script>

</body>
</html>
