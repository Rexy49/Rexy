<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>4x4 Grid Permutation Generator</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 20px;
  }
  .grid {
    display: grid;
    grid-template-columns: repeat(4, 50px);
    grid-gap: 5px;
    margin-bottom: 20px;
  }
  .cell {
    width: 50px;
    height: 50px;
    font-size: 20px;
    text-align: center;
    vertical-align: middle;
    border: 2px solid #333;
    cursor: pointer;
  }
  .cell.selected {
    background-color: #87CEFA; /* light blue */
  }
  button {
    padding: 10px 20px;
    font-size: 16px;
  }
  #results {
    margin-top: 20px;
  }
  /* Optional: make the results scrollable if too long */
  #permutationList {
    max-height: 300px;
    overflow-y: auto;
    border: 1px solid #ccc;
    padding: 10px;
  }
  .permutation {
    margin: 2px 0;
  }
</style>
</head>
<body>

<h2>4x4 Grid Number Input</h2>
<p>Fill all cells with numbers (0-9). Then, select exactly 4 cells by clicking on them. Click "Generate Permutations" to see all permutations of those 4 numbers.</p>

<div class="grid" id="gridContainer">
  <!-- 16 cells will be generated by JavaScript -->
</div>

<button onclick="generateSelectedPermutations()">Generate Permutations</button>

<div id="results">
  <h3>Permutations:</h3>
  <div id="permutationList"></div>
</div>

<script>
// Generate the 4x4 grid with input boxes
const gridContainer = document.getElementById('gridContainer');
const cells = [];

for (let i = 0; i < 16; i++) {
  const input = document.createElement('input');
  input.type = 'text';
  input.maxLength = 1;
  input.className = 'cell';
  input.placeholder = '';
  gridContainer.appendChild(input);
  cells.push(input);
}

// Add click event to toggle selection
cells.forEach(cell => {
  cell.addEventListener('click', () => {
    // Only allow selecting if input is filled with a digit 0-9
    const val = cell.value.trim();
    if (/^[0-9]$/.test(val)) {
      cell.classList.toggle('selected');
    } else {
      alert('Please enter a digit (0-9) before selecting.');
    }
  });
});

// Function to generate permutations
function permute(arr) {
  const results = [];
  if (arr.length === 1) {
    return [arr];
  }
  for (let i = 0; i < arr.length; i++) {
    const current = arr.slice();
    const first = current.splice(i, 1)[0];
    const remainingPerms = permute(current);
    for (const perm of remainingPerms) {
      results.push([first, ...perm]);
    }
  }
  return results;
}

// Function to generate permutations based on selected cells
function generateSelectedPermutations() {
  const selectedCells = Array.from(document.querySelectorAll('.cell.selected'));
  if (selectedCells.length !== 4) {
    alert('Please select exactly 4 cells.');
    return;
  }

  let selectedNumbers = [];
  try {
    selectedNumbers = selectedCells.map(c => {
      const val = c.value.trim();
      if (!/^[0-9]$/.test(val)) {
        throw new Error('All selected cells must contain digits 0-9.');
      }
      return parseInt(val);
    });
  } catch (e) {
    alert(e.message);
    return;
  }

  // Generate all permutations of the 4 numbers
  const permutations = permute(selectedNumbers);
  displayResults(permutations);
}

// Function to display permutations
function displayResults(permutations) {
  const container = document.getElementById('permutationList');
  container.innerHTML = ''; // clear previous results

  if (permutations.length === 0) {
    container.textContent = 'No permutations found.';
    return;
  }

  permutations.forEach(perm => {
    const div = document.createElement('div');
    div.className = 'permutation';
    div.textContent = perm.join(', ');
    container.appendChild(div);
  });
}
</script>

</body>
</html>
